{"version":3,"sources":["webpack://frontend/./src/components/Alerts.js","webpack://frontend/./src/components/CarDetail.js"],"names":["Alerts","state","showAlert","timeout","getReactAlerts","array","map","e","index","variant","type","message","delay","wait","Promise","resolve","reject","setTimeout","props","then","res","setState","messages","prevProps","prevState","prevMessages","length","Component","CarDetail","car","manufacturer","model","production","color","power","mileage","comment","url","tooltipPlace","digitsOnly","charCode","preventDefault","getErrors","data","Object","keys","key","changeCar","target","name","value","changeDate","date","dt","Date","toLocaleDateString","saveCar","axios","redirect","window","location","href","catch","err","response","getCar","registerLocale","ru"],"mappings":"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","file":"src_components_CarDetail_js.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Alert as ReactAlert } from \"react-bootstrap\";\n\nexport default class Alerts extends Component {\n  state = {\n    showAlert: false,\n    timeout: 5000,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    let showAlert = false;\n    const { messages } = this.props;\n    const { messages: prevMessages } = prevProps;\n    // console.log(\"messages\", messages);\n    // console.log(\"errors\", errors);\n    // console.log(\"prevMessages\", prevMessages);\n    // console.log(\"prevErrors\", prevErrors);\n\n    if (messages && messages.length > 0 && messages !== prevMessages) {\n      showAlert = true;\n    }\n    // console.log(\"Alerts componentDidUpdate showAlert\", showAlert);\n    // console.log(\n    //   \"Alerts componentDidUpdate prevSate.showAlert\",\n    //   prevState.showAlert\n    // );\n    // console.log(\n    //   \"Alerts componentDidUpdate this.state.showAlert\",\n    //   this.state.showAlert\n    // );\n    if (showAlert && !this.state.showAlert) {\n      this.setState({\n        showAlert,\n      });\n    }\n  }\n\n  getReactAlerts = (array) => {\n    return array ? (\n      array.map((e, index) => {\n        const variant = e.type === \"success\" ? \"primary\" : \"danger\";\n        return (\n          <ReactAlert variant={variant} key={index}>\n            {e.message}\n          </ReactAlert>\n        );\n      })\n    ) : (\n      <></>\n    );\n  };\n\n  delay = (wait) =>\n    new Promise((resolve, reject) => {\n      setTimeout(() => resolve(), wait);\n    });\n\n  showAlert = () => {\n    if (this.state.showAlert) {\n      this.delay(\n        this.props.timeout ? this.props.timeout : this.state.timeout\n      ).then((res) =>\n        this.setState({\n          showAlert: false,\n        })\n      );\n      return <>{this.getReactAlerts(this.props.messages)}</>;\n    }\n    return <div />;\n  };\n\n  render() {\n    return <>{this.showAlert()}</>;\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {\n  Card,\n  Row,\n  Form,\n  Button,\n  Tooltip,\n  OverlayTrigger,\n} from \"react-bootstrap\";\nimport DatePicker from \"react-datepicker\";\nimport { registerLocale } from \"react-datepicker\";\n//import 'react-day-picker/lib/style.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport ru from \"date-fns/locale/ru\";\nimport Alerts from \"./Alerts\";\n\nexport default class CarDetail extends Component {\n  state = {\n    messages: [],\n    car: {\n      manufacturer: \"\",\n      model: \"\",\n      production: \"\",\n      color: \"\",\n      power: \"\",\n      mileage: \"\",\n      comment: \"\",\n    },\n  };\n\n  url = \"/testforjob/api/car/\";\n  tooltipPlace = \"bottom\";\n\n  componentDidMount() {\n    registerLocale(\"ru\", ru);\n    this.getCar();\n  }\n\n  digitsOnly = (e) => {\n    let charCode = e.charCode;\n    //console.log(charCode);\n    if (charCode < 48 || charCode > 57) {\n      // digits only\n      e.preventDefault();\n    }\n  };\n\n  getErrors = (data) => {\n    return Object.keys(data).map((key) => {\n      return { type: \"error\", message: data[key] };\n    });\n  };\n\n  changeCar = (e) => {\n    //console.log('changeCar', e);\n\n    const car = {\n      ...this.state.car,\n      [e.target.name]: e.target.value,\n    };\n\n    //console.log('changeCar', car);\n\n    this.setState({ car });\n  };\n\n  changeDate = (date) => {\n    //console.log(\"changeDate date\", date);\n    const dt = new Date(date).toLocaleDateString(\"ru\");\n    //console.log(\"changeDate date\", dt);\n    const car = {\n      ...this.state.car,\n      production: new Date(date).toLocaleDateString(\"ru\"),\n    };\n    //console.log(\"changeDate car\", car);\n\n    this.setState({ car });\n  };\n\n  saveCar = (e) => {\n    axios\n      .post(this.url, { car: this.state.car })\n      .then((res) => {\n        //console.log(\"saveCar\", res.data);\n        if (res.data.redirect) {\n          window.location.href = res.data[\"redirect\"];\n        }\n\n        this.setState({\n          car: res.data,\n          messages: [\n            {\n              type: \"success\",\n              message: \"Информация об автомобиле сохранена\",\n            },\n          ],\n        });\n      })\n      .catch((err) => {\n        //console.log(\"geCarDetail saveCar\", err.response.data);\n        this.setState({\n          messages: this.getErrors(err.response.data),\n        });\n      });\n  };\n\n  getCar = () => {\n    axios\n      .post(this.url, {})\n      .then((res) => {\n        //console.log(\"getCar\", res.data);\n\n        this.setState({ car: res.data });\n      })\n      .catch((err) => {\n        //console.log(\"getCarDetail getCar\", err.response.data);\n        this.setState({\n          messages: this.getErrors(err.response.data),\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        <Alerts messages={this.state.messages} />\n        <Card>\n          <Card.Title>Автомобиль</Card.Title>\n          <Card.Body>\n            <Row>\n              <div className=\"col-6\">\n                <Row>\n                  <Form.Label className=\"col-5\">Производитель</Form.Label>\n                  <input\n                    className=\"form-control col-6\"\n                    name=\"manufacturer\"\n                    type=\"text\"\n                    value={this.state.car.manufacturer}\n                    onChange={this.changeCar}\n                  />\n                  <Form.Label className=\"col-5\">Модель</Form.Label>\n                  <input\n                    className=\"form-control col-6\"\n                    name=\"model\"\n                    type=\"text\"\n                    value={this.state.car.model}\n                    onChange={this.changeCar}\n                  />\n\n                  <Form.Label className=\"col-5\">Дата выпуска</Form.Label>\n                  {/* <OverlayTrigger\n                    key={1}\n                    placement={this.tooltipPlace}\n                    overlay={<Tooltip id={`tooltip-1`}>Дата выпуска в формате dd.mm.yyy</Tooltip>}\n                  > */}\n                  <DatePicker\n                    className=\"col-11\"\n                    //format=\"dd.MM.yyyy\"\n                    locale=\"ru\"\n                    name=\"production\"\n                    showYearDropdown={true}\n                    onChange={this.changeDate}\n                    value={this.state.car.production}\n                  />\n                  {/* </OverlayTrigger> */}\n                  <Form.Label className=\"col-5\" name=\"color\">\n                    Цвет\n                  </Form.Label>\n                  <input\n                    className=\"form-control col-6\"\n                    name=\"color\"\n                    type=\"text\"\n                    value={this.state.car.color}\n                    onChange={this.changeCar}\n                  />\n                  <Form.Label className=\"col-5\" name=\"age\">\n                    Мощность (л.с.)\n                  </Form.Label>\n                  <input\n                    className=\"form-control col-6\"\n                    name=\"power\"\n                    type=\"text\"\n                    maxLength=\"3\"\n                    value={this.state.car.power ? this.state.car.power : \"\"}\n                    onChange={this.changeCar}\n                    onKeyPress={this.digitsOnly}\n                  />\n                  <Form.Label className=\"col-5\" name=\"age\">\n                    Пробег (км.)\n                  </Form.Label>\n                  <input\n                    className=\"form-control col-6\"\n                    name=\"mileage\"\n                    type=\"text\"\n                    maxLength=\"10\"\n                    value={this.state.car.mileage ? this.state.car.mileage : \"\"}\n                    onChange={this.changeCar}\n                    onKeyPress={this.digitsOnly}\n                  />\n                </Row>\n              </div>\n              <div className=\"col-6\">\n                <Form.Label className=\"col-5\">Комментарий</Form.Label>\n                <Form.Control\n                  as=\"textarea\"\n                  rows=\"7\"\n                  value={this.state.car.comment}\n                  name=\"comment\"\n                  onChange={this.changeCar}\n                />\n              </div>\n            </Row>\n            <hr />\n            <div className=\"row spacer\">\n              <div className=\"col-12\">\n                <OverlayTrigger\n                  key={2}\n                  placement={this.tooltipPlace}\n                  overlay={\n                    <Tooltip id={`tooltip-2`}>\n                      Сохранить информацию об автомобиле\n                    </Tooltip>\n                  }\n                >\n                  <Button\n                    variant=\"primary\"\n                    className=\"col\"\n                    onClick={this.saveCar}\n                  >\n                    Сохранить\n                  </Button>\n                </OverlayTrigger>\n              </div>\n            </div>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}