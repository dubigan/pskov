(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[509],{3509:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var a=r(7294),n=r(9669),o=r.n(n),c=r(8375),l=r(4479),s=r(4051),i=r(2151),u=r(8324),m=r(3489),f=r(5005),p=r(9198),h=r.n(p),g=(r(9339),r(6754));function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(b,e);var t,r,n,p,y=(n=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(p){var r=j(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return O(this,e)});function b(){var e,t;E(this,b);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return O(t,(e=t=y.call.apply(y,[this].concat(n)),t.state={alert:{showAlert:!1,errors:[],messages:[]},car:{manufacturer:"",model:"",production:"",color:"",power:"",mileage:"",comment:""}},t.url="/testforjob/api/car/",t.tooltipPlace="bottom",t.digitsOnly=function(e){var t=e.charCode;(t<48||t>57)&&e.preventDefault()},t.getErrors=function(e){var t=[];for(var r in e)t.push(e[r]);return t},t.showAlert=function(){if(t.state.alert.showAlert){if(setTimeout((function(){return t.setState({alert:{messages:[],errors:[],showAlert:!1}})}),5e3),t.state.alert.errors.length>0)return a.createElement(c.Z,{variant:"danger"},t.state.alert.errors.join(". "));if(t.state.alert.messages.length>0)return a.createElement(c.Z,{variant:"primary"},t.state.alert.messages.join(". "))}return a.createElement("div",null)},t.changeCar=function(e){var r=d(d({},t.state.car),{},v({},e.target.name,e.target.value));t.setState({car:r})},t.changeDate=function(e){console.log("changeDate date",e);var r=new Date(e).toLocaleDateString("ru");console.log("changeDate date",r);var a=d(d({},t.state.car),{},{production:new Date(e).toLocaleDateString("ru")});console.log("changeDate car",a),t.setState({car:a})},t.saveCar=function(e){o().post(t.url,{car:t.state.car}).then((function(e){console.log("saveCar",e.data),e.data.redirect&&(window.location.href=e.data.redirect),t.setState({car:e.data,alert:{showAlert:!0,messages:["Информация об автомобиле сохранена"],errors:[]}})})).catch((function(e){console.log("geCarDetail saveCar",e.response.data),t.setState({alert:{messages:[],errors:t.getErrors(e.response.data),showAlert:!0}})}))},t.getCar=function(){o().post(t.url,{}).then((function(e){console.log("getCar",e.data),t.setState({car:e.data})})).catch((function(e){console.log("getCarDetail getCar",e.response.data),t.setState({alert:{messages:[],errors:t.getErrors(e.response.data),showAlert:!0}})}))},e))}return t=b,(r=[{key:"componentDidMount",value:function(){this.getCar()}},{key:"render",value:function(){return a.createElement("div",null,this.showAlert(),a.createElement(l.Z,null,a.createElement(l.Z.Title,null,"Автомобиль"),a.createElement(l.Z.Body,null,a.createElement(s.Z,null,a.createElement("div",{className:"col-6"},a.createElement(s.Z,null,a.createElement(i.Z.Label,{className:"col-5"},"Производитель"),a.createElement("input",{className:"form-control col-6",name:"manufacturer",type:"text",value:this.state.car.manufacturer,onChange:this.changeCar}),a.createElement(i.Z.Label,{className:"col-5"},"Модель"),a.createElement("input",{className:"form-control col-6",name:"model",type:"text",value:this.state.car.model,onChange:this.changeCar}),a.createElement(i.Z.Label,{className:"col-5"},"Дата выпуска"),a.createElement(h(),{className:"col-11",locale:g.ru,name:"production",showYearDropdown:!0,onChange:this.changeDate,value:this.state.car.production}),a.createElement(i.Z.Label,{className:"col-5",name:"color"},"Цвет"),a.createElement("input",{className:"form-control col-6",name:"color",type:"text",value:this.state.car.color,onChange:this.changeCar}),a.createElement(i.Z.Label,{className:"col-5",name:"age"},"Мощность (л.с.)"),a.createElement("input",{className:"form-control col-6",name:"power",type:"text",maxLength:"3",value:this.state.car.power?this.state.car.power:"",onChange:this.changeCar,onKeyPress:this.digitsOnly}),a.createElement(i.Z.Label,{className:"col-5",name:"age"},"Пробег (км.)"),a.createElement("input",{className:"form-control col-6",name:"mileage",type:"text",maxLength:"10",value:this.state.car.mileage?this.state.car.mileage:"",onChange:this.changeCar,onKeyPress:this.digitsOnly}))),a.createElement("div",{className:"col-6"},a.createElement(i.Z.Label,{className:"col-5"},"Комментарий"),a.createElement(i.Z.Control,{as:"textarea",rows:"7",value:this.state.car.comment,name:"comment",onChange:this.changeCar}))),a.createElement("hr",null),a.createElement("div",{className:"row spacer"},a.createElement("div",{className:"col-12"},a.createElement(u.Z,{key:2,placement:this.tooltipPlace,overlay:a.createElement(m.Z,{id:"tooltip-2"},"Сохранить информацию об автомобиле")},a.createElement(f.Z,{variant:"primary",className:"col",onClick:this.saveCar},"Сохранить")))))))}}])&&w(t.prototype,r),b}(a.Component)}}]);
//# sourceMappingURL=509.js.map