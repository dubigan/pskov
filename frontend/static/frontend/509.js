(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[509],{6593:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(7294),o=n(8375);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,a,f,m=(a=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(a);if(f){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function p(){var e,t;c(this,p);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return u(t,(e=t=m.call.apply(m,[this].concat(a)),t.state={showAlert:!1,timeout:5e3},t.getReactAlerts=function(e){return e?e.map((function(e,t){var n="success"===e.type?"primary":"danger";return r.createElement(o.Z,{variant:n,key:t},e.message)})):r.createElement(r.Fragment,null)},t.delay=function(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))},t.showAlert=function(){return t.state.showAlert?(t.delay(t.props.timeout?t.props.timeout:t.state.timeout).then((function(e){return t.setState({showAlert:!1})})),r.createElement(r.Fragment,null,t.getReactAlerts(t.props.messages))):r.createElement("div",null)},e))}return t=p,(n=[{key:"componentDidUpdate",value:function(e,t){var n=!1,r=this.props.messages,o=e.messages;r&&r.length>0&&r!==o&&(n=!0),n&&!this.state.showAlert&&this.setState({showAlert:n})}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.showAlert())}}])&&l(t.prototype,n),p}(r.Component)},3509:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(7294),o=n(9669),a=n.n(o),c=n(4479),l=n(4051),s=n(2151),u=n(8324),i=n(3489),f=n(5005),m=n(9198),p=n.n(m),y=(n(9339),n(8523)),h=n(6593);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(P,e);var t,n,o,g,b=(o=P,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(g){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function P(){var e,t;w(this,P);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return j(t,(e=t=b.call.apply(b,[this].concat(r)),t.state={messages:[],car:{manufacturer:"",model:"",production:"",color:"",power:"",mileage:"",comment:""}},t.url="/testforjob/api/car/",t.tooltipPlace="bottom",t.digitsOnly=function(e){var t=e.charCode;(t<48||t>57)&&e.preventDefault()},t.getErrors=function(e){return Object.keys(e).map((function(t){return{type:"error",message:e[t]}}))},t.changeCar=function(e){var n=v(v({},t.state.car),{},d({},e.target.name,e.target.value));t.setState({car:n})},t.changeDate=function(e){new Date(e).toLocaleDateString("ru");var n=v(v({},t.state.car),{},{production:new Date(e).toLocaleDateString("ru")});t.setState({car:n})},t.saveCar=function(e){a().post(t.url,{car:t.state.car}).then((function(e){e.data.redirect&&(window.location.href=e.data.redirect),t.setState({car:e.data,messages:[{type:"success",message:"Информация об автомобиле сохранена"}]})})).catch((function(e){t.setState({messages:t.getErrors(e.response.data)})}))},t.getCar=function(){a().post(t.url,{}).then((function(e){t.setState({car:e.data})})).catch((function(e){t.setState({messages:t.getErrors(e.response.data)})}))},e))}return t=P,(n=[{key:"componentDidMount",value:function(){(0,m.registerLocale)("ru",y.Z),this.getCar()}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(h.Z,{messages:this.state.messages}),r.createElement(c.Z,null,r.createElement(c.Z.Title,null,"Автомобиль"),r.createElement(c.Z.Body,null,r.createElement(l.Z,null,r.createElement("div",{className:"col-6"},r.createElement(l.Z,null,r.createElement(s.Z.Label,{className:"col-5"},"Производитель"),r.createElement("input",{className:"form-control col-6",name:"manufacturer",type:"text",value:this.state.car.manufacturer,onChange:this.changeCar}),r.createElement(s.Z.Label,{className:"col-5"},"Модель"),r.createElement("input",{className:"form-control col-6",name:"model",type:"text",value:this.state.car.model,onChange:this.changeCar}),r.createElement(s.Z.Label,{className:"col-5"},"Дата выпуска"),r.createElement(p(),{className:"col-11",locale:"ru",name:"production",showYearDropdown:!0,onChange:this.changeDate,value:this.state.car.production}),r.createElement(s.Z.Label,{className:"col-5",name:"color"},"Цвет"),r.createElement("input",{className:"form-control col-6",name:"color",type:"text",value:this.state.car.color,onChange:this.changeCar}),r.createElement(s.Z.Label,{className:"col-5",name:"age"},"Мощность (л.с.)"),r.createElement("input",{className:"form-control col-6",name:"power",type:"text",maxLength:"3",value:this.state.car.power?this.state.car.power:"",onChange:this.changeCar,onKeyPress:this.digitsOnly}),r.createElement(s.Z.Label,{className:"col-5",name:"age"},"Пробег (км.)"),r.createElement("input",{className:"form-control col-6",name:"mileage",type:"text",maxLength:"10",value:this.state.car.mileage?this.state.car.mileage:"",onChange:this.changeCar,onKeyPress:this.digitsOnly}))),r.createElement("div",{className:"col-6"},r.createElement(s.Z.Label,{className:"col-5"},"Комментарий"),r.createElement(s.Z.Control,{as:"textarea",rows:"7",value:this.state.car.comment,name:"comment",onChange:this.changeCar}))),r.createElement("hr",null),r.createElement("div",{className:"row spacer"},r.createElement("div",{className:"col-12"},r.createElement(u.Z,{key:2,placement:this.tooltipPlace,overlay:r.createElement(i.Z,{id:"tooltip-2"},"Сохранить информацию об автомобиле")},r.createElement(f.Z,{variant:"primary",className:"col",onClick:this.saveCar},"Сохранить")))))))}}])&&E(t.prototype,n),P}(r.Component)}}]);
//# sourceMappingURL=509.js.map